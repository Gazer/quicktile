
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Developer’s Guide &#8212; QuickTile 0.4 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Authors" href="authors/index.html" />
    <link rel="prev" title="Environment Management (functional_harness/env_general.py)" href="apidocs/functional_harness/env_general.html" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; img-src 'self' https://travis-ci.org https://*.travis-ci.org">
  
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
    <link rel="canonical" href="http://ssokolow.com/quicktile/developing.html"/>
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h1 class="logo"><a href="index.html">QuickTile</a></h1>



<p class="blurb">Keyboard-driven Window Tiling for your existing X11 window manager</p>








    

<p>
<a class="badge" href="https://travis-ci.org/ssokolow/quicktile">
    <img
        alt="CI Test Status"
        src="https://secure.travis-ci.org/ssokolow/quicktile.svg?branch=master"
    />
</a>
</p>


<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="apidocs/functional_harness/env_general.html" title="previous chapter">Environment Management (<code class="docutils literal notranslate"><span class="pre">functional_harness/env_general.py</span></code>)</a></li>
      <li>Next: <a href="authors/index.html" title="next chapter">Authors</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script><div class="badges">
    <p><a href="apt:python3,python3-pip,python3-setuptools,python3-gi,python3-xlib,python3-dbus,gir1.2-glib-2.0,gir1.2-gtk-3.0,gir1.2-wnck-3.0" class="btn" title="Install from configured repositories on Debian-based distros"><img src="_static/img/debian_12.png" alt="Debian"><img src="_static/img/ubuntu_12.png" alt="Ubuntu"><img src="_static/img/mint_12.png" alt="Mint"> Install Dependencies</a></p>
    <p><a href="http://github.com/ssokolow/quicktile/zipball/master" class="btn">Download QuickTile</a></p>
    <p><a href="https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html"><img src="_static/license.svg" alt="License: GPLv2" /></a></p>
</div><div class="contrib_box">
    <h3>Tip Jar</h3>
    <dl>
        <dt>Code (Best)</dt>
        <dd class="icons">
            <ul class="icons">
                <li><a href="https://github.com/ssokolow/quicktile"
                        title="GitHub Repo"><img
                        src="_static/contrib_box/github.png"
                        alt="GitHub" /></a></li>
                <li><a href="https://github.com/ssokolow/quicktile/issues"
                        title="Bug Tracker"><img
                        src="_static/contrib_box/bug.png"
                        alt="Bug Tracker" /></a></li>
            </ul>
        </dd>
        <dt>Publicity (Better)</dt>
        <dd>Show your friends</dd>
        <dt>Snacks (Good)</dt>
        <dd class="icons">
            <ul class="icons">
                <li><a href="https://flattr.com/thing/674146"
                        title="Flattr"><img
                        src="_static/contrib_box/flattr.png"
                        alt="Flattr" /></a></li>
                <li><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top"><input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="EFWRR7EAQ993S"><input type="image" src="_static/contrib_box/paypal.png" name="submit" alt="PayPal" title="PayPal"></form></li>
                <li><a title="BitCoin"
                    href="bitcoin:1Kp1i3nahunzzFs5a3mMF46uzca4oANH5C?label=QuickTile%20Donations"
                    ><img
                    src="_static/contrib_box/bitcoin.png"
                    alt="BitCoin"
                /></a></li>
            </ul>
        </dd>
    </dl>
</div>
<!--
    bug.png and wrench.png from the Silk Icons set by Mark James, available at
    http://www.famfamfam.com/lab/icons/silk/
    are used under the Creative Commons Attribution 2.5 license.
-->
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="developer-s-guide">
<h1>Developer’s Guide<a class="headerlink" href="#developer-s-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#setting-up-a-development-environment" id="id6">Setting up a Development Environment</a></p></li>
<li><p><a class="reference internal" href="#building-development-documentation" id="id7">Building Development Documentation</a></p>
<ul>
<li><p><a class="reference internal" href="#regenerating-documentation-graphics" id="id8">Regenerating Documentation Graphics</a></p></li>
<li><p><a class="reference internal" href="#documentation-privacy-policy" id="id9">Documentation Privacy Policy</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#high-level-quicktile-architecture" id="id10">High-Level QuickTile Architecture</a></p>
<ul>
<li><p><a class="reference internal" href="#quirks-of-the-codebase-s-structure" id="id11">Quirks of the Codebase’s Structure</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#good-development-practice" id="id12">Good Development Practice</a></p></li>
<li><p><a class="reference internal" href="#testing-your-changes" id="id13">Testing Your Changes</a></p>
<ul>
<li><p><a class="reference internal" href="#testing-environment-concerns" id="id14">Testing Environment Concerns</a></p></li>
<li><p><a class="reference internal" href="#automated-testing" id="id15">Automated Testing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#adding-yourself-to-the-authors-list" id="id16">Adding Yourself to the <code class="file docutils literal notranslate"><span class="pre">AUTHORS</span></code> List</a></p></li>
</ul>
</div>
<div class="section" id="setting-up-a-development-environment">
<h2><a class="toc-backref" href="#id6">Setting up a Development Environment</a><a class="headerlink" href="#setting-up-a-development-environment" title="Permalink to this headline">¶</a></h2>
<p>It should be possible to develop QuickTile on any POSIX-compatible platform
with X11-based graphics. However, Linux is the only officially supported
option.</p>
<p>To ensure your changes get accepted as quickly as possible, please bear in mind
the <a class="reference internal" href="#testing-quicktile"><span class="std std-ref">testing requirements</span></a>.</p>
<p>On the operating system you intend to use for development:</p>
<ol class="arabic">
<li><p>Begin by cloning the QuickTile repository. either directly or from a fork
you’ve made on GitHub:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:ssokolow/quicktile.git
</pre></div>
</div>
</li>
<li><p>Install the <a class="reference internal" href="installation.html#dependencies"><span class="std std-ref">runtime dependencies</span></a>.</p></li>
<li><p>Either use the following command to install QuickTile’s additional
development-time dependencies, or manually install the dependencies listed
therein:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip3 install -r dev_requirements.txt
</pre></div>
</div>
<p>These dependencies fall into one of two categories:</p>
<ul class="simple">
<li><p>Source code verification (<a class="reference external" href="https://pypi.org/project/flake8/">Flake8</a> for static analysis and code style,
<a class="reference external" href="http://mypy-lang.org/">MyPy</a> for checking type hints, <a class="reference external" href="https://nose.readthedocs.io/">Nose</a> for test discovery, and
<a class="reference external" href="https://coverage.readthedocs.io/">Coverage.py</a> for determining test coverage)</p></li>
<li><p>Documentation generation (<a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a>, <a class="reference external" href="https://pypi.org/project/sphinx-autodoc-typehints/">sphinx-autodoc-typehints</a>, and
<a class="reference external" href="https://pypi.org/project/sphinxcontrib-autoprogram/">sphinxcontrib-autoprogram</a>)</p></li>
</ul>
</li>
<li><p>If you intend to modify the illustrations or demonstratory animation, you
will also require the following to regenerate the built files:</p>
<ul class="simple">
<li><p>A POSIX-compatible environment (For tools such as <strong class="command">find</strong>)</p></li>
<li><p><a class="reference external" href="https://www.gnu.org/software/make/">GNU Make</a> (to run the Makefiles used to automate the process)</p></li>
<li><p><a class="reference external" href="https://inkscape.org/">Inkscape</a> (to render the SVG sources to PNG)</p></li>
<li><p><a class="reference external" href="http://optipng.sourceforge.net/">OptiPNG</a> and <a class="reference external" href="https://www.advancemame.it/comp-readme">AdvanceCOMP</a> (to optimize the illustrations)</p></li>
<li><p><a class="reference external" href="https://imagemagick.org/">ImageMagick</a> (to combine the frames of the animation into an animated GIF)</p></li>
<li><p><a class="reference external" href="https://www.lcdf.org/gifsicle/">Gifsicle</a> (to optimize the animation)</p></li>
</ul>
</li>
<li><p>Rely on the <code class="docutils literal notranslate"><span class="pre">./quicktile.sh</span></code> option for running QuickTile without
installing it as described in <a class="reference internal" href="installation.html#install-quicktile-sh"><span class="std std-ref">C. Run QuickTile without installing it</span></a>.</p>
<p>This combination of full access to Git functionality and the ability to run
the changed code without needing to install first provides for the simplest
development environment, and makes it easy to remove the development version
and revert to the release versions once you are finished.</p>
</li>
</ol>
</div>
<div class="section" id="building-development-documentation">
<h2><a class="toc-backref" href="#id7">Building Development Documentation</a><a class="headerlink" href="#building-development-documentation" title="Permalink to this headline">¶</a></h2>
<p>QuickTile’s documentation contains extensive TODO notes which are omitted from
release versions.</p>
<p>To enable inclusion of these development notes…</p>
<ol class="arabic simple">
<li><p>Uncomment <code class="docutils literal notranslate"><span class="pre">todo_include_todos</span> <span class="pre">=</span> <span class="pre">True</span></code> in <code class="file docutils literal notranslate"><span class="pre">docs/conf.py</span></code></p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">(cd</span> <span class="pre">docs;</span> <span class="pre">make</span> <span class="pre">html)</span></code>.</p></li>
<li><p>Your developer documentation should now exist in <code class="file docutils literal notranslate"><span class="pre">docs/_build/html/</span></code>.</p></li>
</ol>
<p>The resulting API documentation will include in-line TODO annotations, as well
as a complete listing at the bottom of the doc:<cite>apidocs/index</cite> page.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If Sphinx fails to notice that part of the documentation should be
rebuilt, a rebuild can be forced either by deleting the <code class="file docutils literal notranslate"><span class="pre">_build/html</span></code>
directory or by running <code class="docutils literal notranslate"><span class="pre">(cd</span> <span class="pre">docs;</span> <span class="pre">make</span> <span class="pre">html</span> <span class="pre">SPHINXOPTS=-E)</span></code> instead.</p>
</div>
<p>There also exist TODO comments in the source code (usually ones that shouldn’t
be seen as drawing attention away from the ones in the Sphinx docs) which can
be searched for by running the following command in the project root:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>egrep <span class="s1">&#39;XXX|TODO|FIXME&#39;</span> -nR *.py quicktile functional_harness
</pre></div>
</div>
<p><a class="reference external" href="https://www.pylint.org/">PyLint</a> should also report these.</p>
<div class="section" id="regenerating-documentation-graphics">
<h3><a class="toc-backref" href="#id8">Regenerating Documentation Graphics</a><a class="headerlink" href="#regenerating-documentation-graphics" title="Permalink to this headline">¶</a></h3>
<p>To regenerate the illustrations, run the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="nb">cd</span> docs/diagrams<span class="p">;</span> make<span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nb">cd</span> docs<span class="p">;</span> make html<span class="o">)</span>
</pre></div>
</div>
<p>To regenerate the animation, run the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="nb">cd</span> docs/animation<span class="p">;</span> make<span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nb">cd</span> docs<span class="p">;</span> make html<span class="o">)</span>
</pre></div>
</div>
<p><strong>You only need to do this if you’ve modified the original SVG files.</strong></p>
</div>
<div class="section" id="documentation-privacy-policy">
<h3><a class="toc-backref" href="#id9">Documentation Privacy Policy</a><a class="headerlink" href="#documentation-privacy-policy" title="Permalink to this headline">¶</a></h3>
<p>Out of respect for user privacy and to make offline use of this documentation
as robust as possible, this website/manual makes no external HTTP requests
beyond those needed to ensure that the Travis-CI badge in the sidebar
is current as of the page load.</p>
<p>To mitigate the risk of such requests slipping in through non-obvious means,
such as use of the Sphinx <code class="docutils literal notranslate"><span class="pre">:math:</span></code> role pulling in a CDN-hosted copy of
<a class="reference external" href="https://www.mathjax.org/">MathJax</a>, a <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Content Security Policy</a> meta-tag has been added to the header of
the site template.</p>
<p>It is preferred that you check your browser’s developer console for reports
of requests blocked by the <abbr title="Content Security Policy">CSP</abbr> rules on the
relevant pages before submitting changes to the manual or docstrings.</p>
</div>
</div>
<div class="section" id="high-level-quicktile-architecture">
<h2><a class="toc-backref" href="#id10">High-Level QuickTile Architecture</a><a class="headerlink" href="#high-level-quicktile-architecture" title="Permalink to this headline">¶</a></h2>
<p>Quicktile is fundamentally built around a somewhat HTTP-like request-response
model. The user requests an action, QuickTile performs that action, and then it
goes back to waiting for another event.</p>
<p>Any state which needs to persist between these event handlers should be stored
as X11 window properties using the
<a class="reference internal" href="apidocs/wm.html#quicktile.wm.WindowManager.set_property" title="quicktile.wm.WindowManager.set_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quicktile.wm.WindowManager.set_property()</span></code></a> and
<a class="reference internal" href="apidocs/wm.html#quicktile.wm.WindowManager.get_property" title="quicktile.wm.WindowManager.get_property"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quicktile.wm.WindowManager.get_property()</span></code></a> methods.</p>
<div class="section" id="quirks-of-the-codebase-s-structure">
<h3><a class="toc-backref" href="#id11">Quirks of the Codebase’s Structure</a><a class="headerlink" href="#quirks-of-the-codebase-s-structure" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The <a class="reference internal" href="apidocs/__main__.html#module-quicktile.__main__" title="quicktile.__main__"><code class="xref py py-mod docutils literal notranslate"><span class="pre">quicktile.__main__</span></code></a> module is currently responsible for parsing
configuration files and command-line arguments, migrating old configuration
versions, initializing other components, and stitching them together. It is
slated to be broken up into smaller, more task-specific modules.</p></li>
<li><p>At the moment, due to an incomplete refactoring during the GTK+ 3 port, the
<a class="reference internal" href="apidocs/keybinder.html#module-quicktile.keybinder" title="quicktile.keybinder"><code class="xref py py-mod docutils literal notranslate"><span class="pre">quicktile.keybinder</span></code></a> module is still structured as if optional, though
it is now required for its role in managing the Xlib connection.</p>
<p>Due to oddities in how the X11 protocol behaves when interacting with
short-lived connections, you are likely to get strange and confusing bugs if
the keybinder is not allowed to properly carry out its responsibility for
integrating X11 into the QuickTile event loop.</p>
<p>(Indeed, the bugs that still need to be rooted out of the QuickTile event loop
stem from my not having properly rooted out bugs relating to X11 and
short-lived applications.)</p>
</li>
<li><p>At present, window management is split between the <a class="reference internal" href="apidocs/wm.html#module-quicktile.wm" title="quicktile.wm"><code class="xref py py-mod docutils literal notranslate"><span class="pre">quicktile.wm</span></code></a> and
<a class="reference internal" href="apidocs/util.html#module-quicktile.util" title="quicktile.util"><code class="xref py py-mod docutils literal notranslate"><span class="pre">quicktile.util</span></code></a> modules, with the former being concerned with
communication with the outside world and the latter having temporarily become
a grab-bag of everything that is so self-contained as to be easy to
unit test.</p></li>
<li><p>The <a class="reference internal" href="apidocs/commands.html#module-quicktile.commands" title="quicktile.commands"><code class="xref py py-mod docutils literal notranslate"><span class="pre">quicktile.commands</span></code></a> module also needs to be refactored as it
currently contains the framework for registering and executing tiling
commands and the shared setup code for them (lumped into a single class) as
well as all of the commands themselves.</p></li>
<li><p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">quicktile.version</span></code> module exists only to allow <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> and
the rest of QuickTile to share a single definition of the version number
without <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> having to import actual QuickTile code.</p></li>
</ul>
</div>
</div>
<div class="section" id="good-development-practice">
<h2><a class="toc-backref" href="#id12">Good Development Practice</a><a class="headerlink" href="#good-development-practice" title="Permalink to this headline">¶</a></h2>
<p>Before making changes you intend to have merged back into QuickTile’s
<code class="docutils literal notranslate"><span class="pre">master</span></code> branch, please open a feature request on the <a class="reference external" href="https://github.com/ssokolow/quicktile/issues">issue tracker</a> to
propose them. This will allow me to bring up any non-obvious design concerns
which might complicate, delay, or preclude my accepting your changes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please bear in mind that QuickTile is still catching up after a
decade of spotty maintenance and it may take time for your changes to get
proper attention.</p>
</div>
<p>When working on QuickTile, please keep the following code-quality goals in
mind as, if you do not, then merging your changes may have to wait until I can
revise them:</p>
<ul class="simple">
<li><p>All function arguments should bear complete type annotations which pass
MyPy’s scrutiny and use of <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.8)"><code class="xref any docutils literal notranslate"><span class="pre">typing.Any</span></code></a> or <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">type:</span> <span class="pre">ignore</span></code> must be
approved on a case-by-case basis.</p></li>
<li><p>All <a class="reference external" href="https://pypi.org/project/flake8/">Flake8</a> and <a class="reference external" href="https://www.pylint.org/">PyLint</a> complaints must either be resolved or whitelisted.
New <code class="docutils literal notranslate"><span class="pre">NOQA</span></code> or <code class="docutils literal notranslate"><span class="pre">pylint:</span> <span class="pre">disable=</span></code> annotations must include comments
justifying their presence, except in self-evident cases such as URLs in
docstrings which exceed the line-length limit.</p></li>
<li><p>All code within the <code class="docutils literal notranslate"><span class="pre">quicktile</span></code> package must have complete API
documentation that renders through Sphinx to a standard consistent with
existing documentation.</p></li>
<li><p>doctests count as implicit API requirements and changes to them should not
be made frivolously.</p></li>
<li><p>The percentage of unit test coverage in the <a class="reference internal" href="apidocs/util.html#module-quicktile.util" title="quicktile.util"><code class="xref py py-mod docutils literal notranslate"><span class="pre">quicktile.util</span></code></a> module
should not decrease. (Enforcing this standard outside of that module will
not be feasible until further refactoring and test harness work is
completed.)</p></li>
</ul>
<p>Once your changes are ready, the recommended way to submit them is via
<a class="reference external" href="https://github.com/ssokolow/quicktile/pulls">pull request</a>, as this will automatically submit them to the various
continuous testing services that run on the QuickTile repository, as well
as making it as simple as possible for me to examine and accept them.</p>
</div>
<div class="section" id="testing-your-changes">
<span id="testing-quicktile"></span><h2><a class="toc-backref" href="#id13">Testing Your Changes</a><a class="headerlink" href="#testing-your-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="testing-environment-concerns">
<h3><a class="toc-backref" href="#id14">Testing Environment Concerns</a><a class="headerlink" href="#testing-environment-concerns" title="Permalink to this headline">¶</a></h3>
<p>QuickTile’s current minimum compatibility target is Kubuntu Linux 16.04 LTS.</p>
<p>If this is not what you are running, I suggest using <a class="reference external" href="https://www.virtualbox.org/">VirtualBox</a> for
compatibility testing, as it is easy to set up and has support for virtual
machines with multiple monitors.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When installing VirtualBox, be sure to <strong>not</strong> install the Oracle
VM VirtualBox Extension Pack, as it phones home and Oracle has been
making large licensing demands of people who they believe to be using it
commercially.
<a class="reference external" href="https://www.theregister.co.uk/2019/10/04/oracle_virtualbox_merula/">[1]</a>
<a class="reference external" href="https://www.reddit.com/r/sysadmin/comments/d1ttzp/oracle_is_going_after_companies_using_virtualbox/">[2]</a></p>
<p>Those using only VirtualBox packages provided by their Linux distribution’s
official package repositories should have no need to worry, but its absence
can be confirmed by choosing <span class="menuselection">File ‣ Preferences…</span> from
the VirtualBox menu bar, selecting the <span class="guilabel">Extensions</span> section in
the resulting dialog, and verifying that no extensions other than
<span class="guilabel">VNC</span> are present.</p>
<p>Should this prove too concerning, KVM-based solutions such as <a class="reference external" href="https://virt-manager.org/">virt-manager</a>
or <a class="reference external" href="https://help.gnome.org/users/gnome-boxes/stable/">GNOME Boxes</a> should also serve equally well though I can give no
advice on setting them up for multi-monitor support.</p>
</div>
<p>For best results, configure your virtual desktop with the following characteristics:</p>
<ol class="arabic">
<li><p>Differently-sized monitors (Certain bugs in moving windows from monitor to
monitor can only be triggered if one monitor is larger or smaller than
another.)</p></li>
<li><p>Panels (taskbars and the like) on an edge where the monitors are adjacent
but do not line up.</p>
<p>Suppose you have a 1280x1024 monitor and a 1920x1080 monitor, and the tops
are aligned. Place panels on the bottom, so that the reservation for the
shorter monitor will also have to cover the dead space below it and has the
best chance of triggering any dead-space-related bugs in the code for
calculating usable regions.</p>
</li>
</ol>
</div>
<div class="section" id="automated-testing">
<h3><a class="toc-backref" href="#id15">Automated Testing</a><a class="headerlink" href="#automated-testing" title="Permalink to this headline">¶</a></h3>
<p>To run a complete set of everything that can be completed quickly, please use
the following command from the root of the project:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./run_tests.sh
</pre></div>
</div>
<p>It will perform the majority of the tests which will be run by Travis-CI when
you open a pull request, while still completing in under 5 seconds with a hot
cache on an old 2-core Althon with no SSD.</p>
<p>The following will be run:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://mypy-lang.org/">MyPy</a> to check for violations of the type annotations.</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/flake8/">Flake8</a> for basic static analysis and code style checking</p></li>
<li><p><a class="reference external" href="https://nose.readthedocs.io/">Nose</a> and <a class="reference external" href="https://docs.python.org/3/library/doctest.html">doctest</a> to run the unit tests (currently of limited scope)</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/doctest.html">doctest</a> to check for broken code examples in the API documentation</p></li>
<li><p><a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a>’s <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">coverage</span></code> to check documentation coverage
(currently of questionable reliability)</p></li>
</ul>
<p>While the dependency on system packages such as PyGObject limits its utility,
you may also use <a class="reference external" href="https://tox.readthedocs.io/">tox</a> to test that QuickTile’s <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> packaging process
works properly. (However, bear in mind that you will need to edit <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code>
if your system Python is not version 3.5 as found on Kubuntu Linux 16.04 LTS.)</p>
<p>Bear in mind that, while not yet incorporated into convenient scripts, the
following tests will also be run by the <a class="reference external" href="https://github.com/dense-analysis/ale/">ALE</a> analysis plugin for my text editor
when I examine your contribution:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/PyCQA/bandit">Bandit</a> (You can run this as <code class="docutils literal notranslate"><span class="pre">bandit</span> <span class="pre">quicktile</span></code> after installation.)</p></li>
<li><p><a class="reference external" href="https://www.pylint.org/">PyLint</a> (Assuming you have your system configured to complain about
deprecation warnings as I do, I suggest running PyLint as
<code class="docutils literal notranslate"><span class="pre">pylint3</span> <span class="pre">--rcfile=pylintrc</span> <span class="pre">quicktile</span> <span class="pre">2&gt;/dev/null</span></code>)</p></li>
</ul>
<p>While it currently relies on an ugly hack which hard-codes Openbox and
Zenity as dependencies, and does not yet assert that windows wind up
in the expected states, you may also find the beginnings of a functional
test suite useful as a way to exercise the code and check for uncaught
exceptions:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./test_functional.py -v
</pre></div>
</div>
<p>Bear in mind that, even once it is more mature, it will remain excluded
from <code class="file docutils literal notranslate"><span class="pre">run_tests.sh</span></code> because it takes too long to be part of a
comfortable edit-test cycle.</p>
<p>In lieu of a proper functional test suite, please manually execute all tiling
commands which rely on code you’ve touched and watch for misbehaviour.</p>
</div>
</div>
<div class="section" id="adding-yourself-to-the-authors-list">
<h2><a class="toc-backref" href="#id16">Adding Yourself to the <code class="file docutils literal notranslate"><span class="pre">AUTHORS</span></code> List</a><a class="headerlink" href="#adding-yourself-to-the-authors-list" title="Permalink to this headline">¶</a></h2>
<p>When making a contribution, please also add yourself to the
<a class="reference internal" href="authors/index.html"><span class="doc">Authors</span></a> section and regenerate the <code class="file docutils literal notranslate"><span class="pre">AUTHORS</span></code> file in the
root of the project.</p>
<p>This can be done as follows:</p>
<ol class="arabic simple">
<li><p>Edit <code class="file docutils literal notranslate"><span class="pre">docs/authors/index.rst</span></code></p></li>
<li><p>Regenerate the HTML version of the documentation and verify that it looks
right. (Run <strong class="command">make html</strong> from inside the <code class="file docutils literal notranslate"><span class="pre">docs</span></code> folder.)</p></li>
<li><p>Run <code class="file docutils literal notranslate"><span class="pre">./docs/update_authors.sh</span></code> to regenerate <code class="file docutils literal notranslate"><span class="pre">AUTHORS</span></code></p></li>
<li><p>Verify that <code class="file docutils literal notranslate"><span class="pre">AUTHORS</span></code> looks right.</p></li>
<li><p>Commit your changes.</p></li>
</ol>
<p>Additions to the “The Program” section should be phrased so that reading the
definition list title and body together form a sentence in the <a class="reference external" href="https://en.wikipedia.org/wiki/Simple_past">simple past
tense</a>. However, the body portion should still be capitalized as if it is
a complete sentence.</p>
<p>Please combine related changes into a single high-level description of the user-visible changes. This rule may be relaxed when it would unfairly downplay the
amount of work involved.</p>
<p>Please try to make proper use of Sphinx markup to indicate things such as
command and function names. Constructs such as <code class="docutils literal notranslate"><span class="pre">:py:mod:`round`</span></code> may be used
to reference identifiers within dependencies but be aware that, because
generation of <code class="file docutils literal notranslate"><span class="pre">AUTHORS</span></code> considers the document in isolation,
markup which attempts to generate cross-references to the rest of the manual
will trigger warnings when <code class="file docutils literal notranslate"><span class="pre">update_authors.sh</span></code> is run and may <em>not</em> be
be used.</p>
<p>A Good Example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Yuting/Tim Xiao
    Made the wndow-tiling heuristics more robust.
</pre></div>
</div>
<p>A Bad Example:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>Yuting/Tim Xiao

    <span class="m">*</span> Increase closest-dimension matching fuzziness to 100px.
    <span class="m">*</span> Update min-distance calculation in cycleDimensions to use
      lengths instead of area.
    <span class="m">*</span> Always use the first given configuration for untiled windows.
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    
    <div class="footer">
      &copy;2009-2020, Stephan Sokolow et al.
      
      |
      <a href="_sources/developing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <span id="forkongithub"><a href="https://github.com/ssokolow/quicktile">Fork me on GitHub</a></span>
  </body>
</html>